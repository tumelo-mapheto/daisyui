function m(t){const n=/(\d+)(\D*)/,[,i="0",e=""]=t.match(n)||[];return{number:parseInt(i,10),unit:e}}function l(t,n){const{width:i,height:e}=t;if("width"in n){const{width:s}=n;return{width:s,height:s/i*e}}const{height:u}=n;return{width:u/e*i,height:u}}function D(t,n){const i=t.getAttribute("width"),e=t.getAttribute("height");if(i&&e)return{width:i,height:e};const u={width:i||"",height:e||""},s=n.getAttribute("width"),c=n.getAttribute("height"),h=n.getAttribute("viewBox");if(!(s&&c||h))return u;let r=0,o=0,w="",f="";if(s&&c?({number:r,unit:w}=m(s),{number:o,unit:f}=m(c)):h&&([,,r,o]=h.split(" ").map(g=>parseInt(g,10))),w!==f)return{width:i||s||"",height:e||c||""};if(i){const{number:g,unit:b}=m(i),a=l({width:r,height:o},{width:g}),d=b||w;return{width:a.width.toFixed(2)+d,height:a.height.toFixed(2)+d}}if(e){const{number:g,unit:b}=m(e),a=l({width:r,height:o},{height:g}),d=b||f;return{width:a.width.toFixed(2)+d,height:a.height.toFixed(2)+d}}return{width:r+w,height:o+f}}function p(t,n){let i=x(n);async function e(){if(i.src){const u=await fetch(i.src,{cache:i.cache}),s=i.transform(await u.text()),c=new DOMParser().parseFromString(s,"image/svg+xml").documentElement;for(let h=0;h<c.attributes.length;h++){const r=c.attributes[h];!t.hasAttribute(r.name)&&!["width","height"].includes(r.name)&&t.setAttribute(r.name,r.value)}if(i.autoDimensions){const h=D(t,c);t.setAttribute("width",h.width),t.setAttribute("height",h.height)}else t.setAttribute("width",t.getAttribute("width")||""),t.setAttribute("height",t.getAttribute("height")||"");t.innerHTML=c.innerHTML}}return e(),{update(u){i=x(u),e()}}}const A={src:"",cache:"no-cache",autoDimensions:!0,transform:t=>t};function x(t=""){return typeof t=="string"?{...A,src:t}:{...A,...t}}export{p as i};
